---
title: 如果我们想实现一个 WAF之 -- WAF 是怎么工作的
date: 2024-01-31T10:33:20+08:00
draft: true
hasCJKLanguage: true
tags:
  - 安全
  - waf
  - 网络安全
series:
  - 网络不安全系列
categories:
  - 经验分享
  - 网络安全
keywords:
  - 安全
  - 网络安全
  - 张英伟
  - 张英伟的个人博客
  - Obsidian
  - SQL注入
  - waf
  - 胡说
aliases:
---
想要了解 WAF 是怎么工作的，势必要先了解一下 WAF 的内容构成。

![image.png](https://hushuo.zhangyingwei.com/20240131105742.png)

在上图中，核心功能基本可以拆分为四大块：

1. 流量采集/过滤/解析
2. 黑白名单
3. 规则引擎
4. 告警处理

s接下来，我们就按照这四个步骤，思考如何实现一个简易的 WAF 。

> PS: 为了表达核心思想、简化代码复杂度。本示例使用 Python3.7 进行编码，仅实现核心逻辑。不保证代码可以最终运行。主要目标是表达具体的编码逻辑和技术细节。

> PS: 以下代码中采用的方法不代表最优解，仅表示业务逻辑。

# 🐭流量采集/过滤/解析

流量采集功能主要工作

# 🐰 WAF 与规则引擎

编写规则引擎代码

# 🐲 WAF 如何处理告警

编写处理告警逻辑

# 🐍 一个简单的 WAF

代码整合

# 🐎 WAF 扩展功能

整合其他功能
