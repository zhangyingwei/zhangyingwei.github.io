<!doctype html><html lang=en dir=" auto">
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta charset=utf-8>
<meta name=Share-Source-Verification content="https://blog.zhangyingwei.com/">
<meta http-equiv=cache-control content="no-transform">
<meta http-equiv=cache-control content="no-siteapp">
<meta name=renderer content="webkit">
<meta name=apple-mobile-web-app-capable content="yes">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta property="og:title" content="如果我们想实现一个 WAF之 -- 什么是 WAF">
<meta property="og:image" content="/images/favicon64.ico">
<meta name=msvalidate.01 content="1B50C3A24BF817BB86D82C8429075AE4">
<meta name=bytedance-verification-code content="rjX6knbDoNxpR4Asxe2M">
<meta name=robots content="index, follow">
<title>如果我们想实现一个 WAF之 -- 什么是 WAF | 胡说</title>
<meta name=keywords content="安全,网络安全,张英伟,张英伟的个人博客,waf,Obsidian">
<meta name=description content="如果我们想实现一个简易的 WAF，我们实际上需要干什么？我们需要先了解什么是 WAF。
🐭 什么是 WAF WAF 全称 Web Application Firewall，是一种工作在应用层（7 层）的防火墙，主要用于对应用层中的 HTTP 流量进行监测、过滤和阻止。主要适用于 Web 应用中存在的已知的安全漏洞，例如：SQL 注入、CSRF 跨站请求伪造攻击、XSS 跨站脚本攻击等。
其主要防护原理是基于规则匹配，通过预制的识别规则，对 HTTP 协议中提取出来的信息进行匹配，如果可以匹配，则该请求被认为是攻击行为。WAF 将会对其执行相关的操作（告警、阻断、记录日志）。
综上所诉，WAF 的基本原理如下：
那么回到问题，什么是 WAF 呢？
 WAF 是一个工作在应用层，主要针对 HTTP 流量进行解析、检测的装置；其检测功能主要基于规则引擎，通过预制规则，对流量中的相关信息进行匹配，能够针对流量中的 SQL 注入、CSRF、XSS 等 Web 攻击行为进行识别与防护，防护手段主要有告警、阻断、记录日志。
 🐮 WAF 通常部署在哪里 从形态上来讲， WAF 主要分为软件型 WAF 和硬件型 WAF
软件型 WAF 主要以嵌入的形式进行部署，一般部署在 Web 服务器中，常见的例如 nginx waf、apache waf、openresty waf 等。
硬件型 WAF 主要通过软件绑定硬件的方式，其部署方式多种多样，以下内容中的 WAF 默认指代硬件 WAF。
WAF 的部署模式通常有： 反向代理、透明代理、透明桥、流量镜像等方式。
反向代理 客户与 WAF 进行交互，WAF 将客户的请求直接转发至后端，后方的 Web Server 与 WAF 进行交互，不会直接暴漏给客户。">
<meta name=author content="zhangyw">
<link rel=canonical href=https://blog.zhangyingwei.com/posts/2024m1d25h13m45s53/>
<link crossorigin=anonymous href=/assets/css/stylesheet.min.34c75321f73ea9e38ba0b532955c0db98f1a4a74e0bb898898d722437c91f7e0.css integrity="sha256-NMdTIfc+qeOLoLUylVwNuY8aSnTgu4mImNciQ3yR9+A=" rel="preload stylesheet" as=style>
<script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://blog.zhangyingwei.com/images/favicon64.ico>
<link rel=icon type=image/png sizes=16x16 href=https://blog.zhangyingwei.com/images/favicon16.ico>
<link rel=icon type=image/png sizes=32x32 href=https://blog.zhangyingwei.com/images/favicon32.ico>
<link rel=apple-touch-icon href=https://blog.zhangyingwei.com/apple-touch-icon.png>
<link rel=mask-icon href=https://blog.zhangyingwei.com/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript><link href=https://hushuo.zhangyingwei.com/NotoSerifSC.css rel=stylesheet>
<link href=https://hushuo.zhangyingwei.com/JetBrainsMono.css rel=stylesheet>
<script>var _hmt=_hmt||[];(function(){var a=document.createElement("script"),b;a.src="https://hm.baidu.com/hm.js?ba380df4e327c711daf3b841b4089ce4",b=document.getElementsByTagName("script")[0],b.parentNode.insertBefore(a,b)})()</script>
<script async src=https://umami.zhangyingwei.com/script.js data-website-id=cb41ccbd-6ee9-4587-9c03-d872f2d10472></script><meta property="og:title" content="如果我们想实现一个 WAF之 -- 什么是 WAF">
<meta property="og:description" content="如果我们想实现一个简易的 WAF，我们实际上需要干什么？我们需要先了解什么是 WAF。
🐭 什么是 WAF WAF 全称 Web Application Firewall，是一种工作在应用层（7 层）的防火墙，主要用于对应用层中的 HTTP 流量进行监测、过滤和阻止。主要适用于 Web 应用中存在的已知的安全漏洞，例如：SQL 注入、CSRF 跨站请求伪造攻击、XSS 跨站脚本攻击等。
其主要防护原理是基于规则匹配，通过预制的识别规则，对 HTTP 协议中提取出来的信息进行匹配，如果可以匹配，则该请求被认为是攻击行为。WAF 将会对其执行相关的操作（告警、阻断、记录日志）。
综上所诉，WAF 的基本原理如下：
那么回到问题，什么是 WAF 呢？
 WAF 是一个工作在应用层，主要针对 HTTP 流量进行解析、检测的装置；其检测功能主要基于规则引擎，通过预制规则，对流量中的相关信息进行匹配，能够针对流量中的 SQL 注入、CSRF、XSS 等 Web 攻击行为进行识别与防护，防护手段主要有告警、阻断、记录日志。
 🐮 WAF 通常部署在哪里 从形态上来讲， WAF 主要分为软件型 WAF 和硬件型 WAF
软件型 WAF 主要以嵌入的形式进行部署，一般部署在 Web 服务器中，常见的例如 nginx waf、apache waf、openresty waf 等。
硬件型 WAF 主要通过软件绑定硬件的方式，其部署方式多种多样，以下内容中的 WAF 默认指代硬件 WAF。
WAF 的部署模式通常有： 反向代理、透明代理、透明桥、流量镜像等方式。
反向代理 客户与 WAF 进行交互，WAF 将客户的请求直接转发至后端，后方的 Web Server 与 WAF 进行交互，不会直接暴漏给客户。">
<meta property="og:type" content="article">
<meta property="og:url" content="https://blog.zhangyingwei.com/posts/2024m1d25h13m45s53/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2024-01-25T13:45:53+08:00">
<meta property="article:modified_time" content="2024-01-25T13:45:53+08:00"><meta property="og:site_name" content="胡说">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://blog.zhangyingwei.com/posts/"},{"@type":"ListItem","position":2,"name":"如果我们想实现一个 WAF之 -- 什么是 WAF","item":"https://blog.zhangyingwei.com/posts/2024m1d25h13m45s53/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"如果我们想实现一个 WAF之 -- 什么是 WAF","name":"如果我们想实现一个 WAF之 -- 什么是 WAF","description":"如果我们想实现一个简易的 WAF，我们实际上需要干什么？我们需要先了解什么是 WAF。\n🐭 什么是 WAF WAF 全称 Web Application Firewall，是一种工作在应用层（7 层）的防火墙，主要用于对应用层中的 HTTP 流量进行监测、过滤和阻止。主要适用于 Web 应用中存在的已知的安全漏洞，例如：SQL 注入、CSRF 跨站请求伪造攻击、XSS 跨站脚本攻击等。\n其主要防护原理是基于规则匹配，通过预制的识别规则，对 HTTP 协议中提取出来的信息进行匹配，如果可以匹配，则该请求被认为是攻击行为。WAF 将会对其执行相关的操作（告警、阻断、记录日志）。\n综上所诉，WAF 的基本原理如下：\n那么回到问题，什么是 WAF 呢？\n WAF 是一个工作在应用层，主要针对 HTTP 流量进行解析、检测的装置；其检测功能主要基于规则引擎，通过预制规则，对流量中的相关信息进行匹配，能够针对流量中的 SQL 注入、CSRF、XSS 等 Web 攻击行为进行识别与防护，防护手段主要有告警、阻断、记录日志。\n 🐮 WAF 通常部署在哪里 从形态上来讲， WAF 主要分为软件型 WAF 和硬件型 WAF\n软件型 WAF 主要以嵌入的形式进行部署，一般部署在 Web 服务器中，常见的例如 nginx waf、apache waf、openresty waf 等。\n硬件型 WAF 主要通过软件绑定硬件的方式，其部署方式多种多样，以下内容中的 WAF 默认指代硬件 WAF。\nWAF 的部署模式通常有： 反向代理、透明代理、透明桥、流量镜像等方式。\n反向代理 客户与 WAF 进行交互，WAF 将客户的请求直接转发至后端，后方的 Web Server 与 WAF 进行交互，不会直接暴漏给客户。","keywords":["安全","网络安全","张英伟","张英伟的个人博客","waf","Obsidian"],"articleBody":"如果我们想实现一个简易的 WAF，我们实际上需要干什么？我们需要先了解什么是 WAF。\n🐭 什么是 WAF WAF 全称 Web Application Firewall，是一种工作在应用层（7 层）的防火墙，主要用于对应用层中的 HTTP 流量进行监测、过滤和阻止。主要适用于 Web 应用中存在的已知的安全漏洞，例如：SQL 注入、CSRF 跨站请求伪造攻击、XSS 跨站脚本攻击等。\n其主要防护原理是基于规则匹配，通过预制的识别规则，对 HTTP 协议中提取出来的信息进行匹配，如果可以匹配，则该请求被认为是攻击行为。WAF 将会对其执行相关的操作（告警、阻断、记录日志）。\n综上所诉，WAF 的基本原理如下：\n那么回到问题，什么是 WAF 呢？\n WAF 是一个工作在应用层，主要针对 HTTP 流量进行解析、检测的装置；其检测功能主要基于规则引擎，通过预制规则，对流量中的相关信息进行匹配，能够针对流量中的 SQL 注入、CSRF、XSS 等 Web 攻击行为进行识别与防护，防护手段主要有告警、阻断、记录日志。\n 🐮 WAF 通常部署在哪里 从形态上来讲， WAF 主要分为软件型 WAF 和硬件型 WAF\n软件型 WAF 主要以嵌入的形式进行部署，一般部署在 Web 服务器中，常见的例如 nginx waf、apache waf、openresty waf 等。\n硬件型 WAF 主要通过软件绑定硬件的方式，其部署方式多种多样，以下内容中的 WAF 默认指代硬件 WAF。\nWAF 的部署模式通常有： 反向代理、透明代理、透明桥、流量镜像等方式。\n反向代理 客户与 WAF 进行交互，WAF 将客户的请求直接转发至后端，后方的 Web Server 与 WAF 进行交互，不会直接暴漏给客户。\n这样的架构可以有效的影藏后边的具体服务，防止直接针对 Web Server 的攻击。\n透明代理 客户访问的对象为 Web Server，WAF 在链路中间对于客户来说是透明无感知的。\n这样的架构对网络拓扑来说入侵性比较小，不需要单独为 WAF 划分 IP 资源。\n流量镜像 WAF 直接对接的对象是路由器，通过路由器的流量镜像功能，把客户到 Web Server 的流量镜像复制一份到 WAF\n这样的架构对网络没有任何入侵，可靠性更高，如果 WAF 出现稳定性问题也不会影响到业务流量。\n各个模式对比    部署模式 部署位置 能否检测 HTTPS 经过 WAF 后是否会改变数据包 WAF 的部署会否影响原链路     反向代理 串联 能 是 是   透明代理 串联 能 是 轻微影响   流量镜像 旁路 否 - 不影响    🐯 WAF 能做什么不能做什么 ✅ 能做什么\n 可以过滤 HTTP/HTTPS 流量 可以对 Web 应用流量进行安全审计 可以防止 CC 攻击 可以防止敏感信息泄露  ❎ 不能做什么\n 不能过滤除了 HTTP/HTTPS 以外的其他流量 不能实现传统防火墙功能，例如地址映射 不能防病毒  总结 在本篇内容中，基本讲述了什么是 WAF 以及 WAF 的部署方式和能力范围。接下来我们将会开始从简易代码的角度了解，WAF 到底是怎么工作的。\n","wordCount":"153","inLanguage":"en","datePublished":"2024-01-25T13:45:53+08:00","dateModified":"2024-01-25T13:45:53+08:00","author":{"@type":"Person","name":"zhangyw"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.zhangyingwei.com/posts/2024m1d25h13m45s53/"},"publisher":{"@type":"Organization","name":"胡说","logo":{"@type":"ImageObject","url":"https://blog.zhangyingwei.com/images/favicon64.ico"}}}</script>
</head>
<body class="font-activate bg-color mt-20" id="
    top">
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<header class="header font-activate sticky-element shadow-b">
<nav class=nav>
<div class=logo>
<a href=https://blog.zhangyingwei.com/ accesskey=h title="胡说 (Alt + H)">胡说</a>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</span>
</div>
<ul id=menu>
<li>
<a href=https://blog.zhangyingwei.com/series/ title=系列文章>
<span>系列文章</span>
</a>
</li>
<li>
<a href=https://blog.zhangyingwei.com/archives/ title=归档>
<span>归档</span>
</a>
</li>
<li>
<a href=https://blog.zhangyingwei.com/tags/ title=标签>
<span>标签</span>
</a>
</li>
</ul>
</nav>
</header><div style=height:20px></div>
<main class="main font-activate bg-color">
<article class="post-single item-padding">
<header class=post-header>
<h1 class=post-title>
如果我们想实现一个 WAF之 -- 什么是 WAF
</h1>
<div class=post-info>2024/01/25
<ul id=series>
🅰️
<li> <a href=https://blog.zhangyingwei.com/%20topics/%E7%BD%91%E7%BB%9C%E4%B8%8D%E5%AE%89%E5%85%A8%E7%B3%BB%E5%88%97>网络不安全系列</a> </li>
</ul>
<ul id=categories>
✨
<li><a href=https://blog.zhangyingwei.com/%20categories/%E7%BB%8F%E9%AA%8C%E5%88%86%E4%BA%AB>经验分享</a> </li>
<li><a href=https://blog.zhangyingwei.com/%20categories/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8>网络安全</a> </li>
</ul>
</div>
</header>
<div class=post-content><p>如果我们想实现一个简易的 WAF，我们实际上需要干什么？我们需要先了解什么是 WAF。</p>
<h1 id=-什么是-waf>🐭 什么是 WAF<a hidden class=anchor aria-hidden=true href=#-什么是-waf>#</a></h1>
<p>WAF 全称 Web Application Firewall，是一种工作在应用层（7 层）的防火墙，主要用于对应用层中的 HTTP 流量进行监测、过滤和阻止。主要适用于 Web 应用中存在的已知的安全漏洞，例如：SQL 注入、CSRF 跨站请求伪造攻击、XSS 跨站脚本攻击等。</p>
<p>其主要防护原理是基于规则匹配，通过预制的识别规则，对 HTTP 协议中提取出来的信息进行匹配，如果可以匹配，则该请求被认为是攻击行为。WAF 将会对其执行相关的操作（告警、阻断、记录日志）。</p>
<p>综上所诉，WAF 的基本原理如下：</p>
<p><img loading=lazy src=https://hushuo.zhangyingwei.com/20240125174757.png alt=image.png>
</p>
<p>那么回到问题，什么是 WAF 呢？</p>
<blockquote>
<p>WAF 是一个工作在应用层，主要针对 HTTP 流量进行解析、检测的装置；其检测功能主要基于规则引擎，通过预制规则，对流量中的相关信息进行匹配，能够针对流量中的 SQL 注入、CSRF、XSS 等 Web 攻击行为进行识别与防护，防护手段主要有告警、阻断、记录日志。</p>
</blockquote>
<h1 id=-waf-通常部署在哪里>🐮 WAF 通常部署在哪里<a hidden class=anchor aria-hidden=true href=#-waf-通常部署在哪里>#</a></h1>
<p>从形态上来讲， WAF 主要分为软件型 WAF 和硬件型 WAF</p>
<p><img loading=lazy src=https://hushuo.zhangyingwei.com/20240131101848.png alt=image.png>
</p>
<p>软件型 WAF 主要以嵌入的形式进行部署，一般部署在 Web 服务器中，常见的例如 nginx waf、apache waf、openresty waf 等。</p>
<p>硬件型 WAF 主要通过软件绑定硬件的方式，其部署方式多种多样，以下内容中的 WAF 默认指代硬件 WAF。</p>
<p>WAF 的部署模式通常有： 反向代理、透明代理、透明桥、流量镜像等方式。</p>
<h2 id=反向代理>反向代理<a hidden class=anchor aria-hidden=true href=#反向代理>#</a></h2>
<p><img loading=lazy src=https://hushuo.zhangyingwei.com/20240126164455.png alt=image.png>
</p>
<p>客户与 WAF 进行交互，WAF 将客户的请求直接转发至后端，后方的 Web Server 与 WAF 进行交互，不会直接暴漏给客户。</p>
<p>这样的架构可以有效的影藏后边的具体服务，防止直接针对 Web Server 的攻击。</p>
<h2 id=透明代理>透明代理<a hidden class=anchor aria-hidden=true href=#透明代理>#</a></h2>
<p><img loading=lazy src=https://hushuo.zhangyingwei.com/20240126172412.png alt=image.png>
客户访问的对象为 Web Server，WAF 在链路中间对于客户来说是透明无感知的。</p>
<p>这样的架构对网络拓扑来说入侵性比较小，不需要单独为 WAF 划分 IP 资源。</p>
<h2 id=流量镜像>流量镜像<a hidden class=anchor aria-hidden=true href=#流量镜像>#</a></h2>
<p><img loading=lazy src=https://hushuo.zhangyingwei.com/20240126173405.png alt=image.png>
</p>
<p>WAF 直接对接的对象是路由器，通过路由器的流量镜像功能，把客户到 Web Server 的流量镜像复制一份到 WAF</p>
<p>这样的架构对网络没有任何入侵，可靠性更高，如果 WAF 出现稳定性问题也不会影响到业务流量。</p>
<h2 id=各个模式对比>各个模式对比<a hidden class=anchor aria-hidden=true href=#各个模式对比>#</a></h2>
<table>
<thead>
<tr>
<th>部署模式</th>
<th>部署位置</th>
<th>能否检测  HTTPS</th>
<th>经过  WAF  后是否会改变数据包</th>
<th>WAF  的部署会否影响原链路</th>
</tr>
</thead>
<tbody>
<tr>
<td>反向代理</td>
<td>串联</td>
<td>能</td>
<td>是</td>
<td>是</td>
</tr>
<tr>
<td>透明代理</td>
<td>串联</td>
<td>能</td>
<td>是</td>
<td>轻微影响</td>
</tr>
<tr>
<td>流量镜像</td>
<td>旁路</td>
<td>否</td>
<td>-</td>
<td>不影响</td>
</tr>
</tbody>
</table>
<h1 id=-waf-能做什么不能做什么>🐯 WAF 能做什么不能做什么<a hidden class=anchor aria-hidden=true href=#-waf-能做什么不能做什么>#</a></h1>
<p><strong>✅ 能做什么</strong></p>
<ol>
<li>可以过滤 HTTP/HTTPS 流量</li>
<li>可以对 Web 应用流量进行安全审计</li>
<li>可以防止 CC 攻击</li>
<li>可以防止敏感信息泄露</li>
</ol>
<p><strong>❎ 不能做什么</strong></p>
<ol>
<li>不能过滤除了 HTTP/HTTPS 以外的其他流量</li>
<li>不能实现传统防火墙功能，例如地址映射</li>
<li>不能防病毒</li>
</ol>
<h1 id=总结>总结<a hidden class=anchor aria-hidden=true href=#总结>#</a></h1>
<p>在本篇内容中，基本讲述了什么是 WAF 以及 WAF 的部署方式和能力范围。接下来我们将会开始从简易代码的角度了解，WAF 到底是怎么工作的。</p>
</div>
<link href=https://comment.fascloud.org/dist/Artalk.css rel=stylesheet>
<style>.dark .atk-main-editor{background-color:#37383e!important;border:1px solid #555660!important}.dark .artalk{color:#bdbdbe!important}.dark .atk-main-editor>.atk-textarea-wrap>.atk-textarea{background-color:#37383e!important;color:#bdbdbe!important}.dark .atk-editor-plug-emoticons>.atk-grp-switcher{background:#37383e!important;border-top:1px solid #555660!important;border-bottom:1px solid #555660!important}.dark .atk-editor-plug-emoticons>.atk-grp-switcher>span:hover,.dark .atk-editor-plug-emoticons>.atk-grp-switcher>span.active{background:#262629!important}.dark .atk-main-editor>.atk-plug-panel-wrap{border-top:1px solid #555660!important}.dark .atk-comment>.atk-main>.atk-header .badge,.atk-comment>.atk-main>.atk-header .atk-ua,.atk-comment>.atk-main>.atk-header .atk-pinned-badge,.atk-comment>.atk-main>.atk-header .atk-region-badge,.atk-comment>.atk-main>.atk-header .atk-badge{color:#bdc6d9!important;background:#000!important}.dark .atk-main-editor>.atk-textarea-wrap>.atk-send-reply{background:rgb(134 134 134/75%)!important}.comment-split-line{text-align:center;font-size:14px;border-bottom:1px solid #eaecef;margin:50px 0;height:0}.comment-split-line::after{content:"评论";background-color:#ececec;border-radius:10px;padding:0 10px;position:relative;top:-10px;color:#6a737d}.dark .comment-split-line::after{background-color:#37383e;color:#bdc6d9}.dark .comment-split-line{border-bottom:1px solid #555660}</style>
<script src=https://comment.fascloud.org/dist/Artalk.js></script>
<div class=comment-split-line></div>
<div id=Comments></div>
<script>Artalk.init({el:'#Comments',pageKey:'',pageTitle:'',server:'https://comment.fascloud.org/',site:'blog-hushuo'})</script>
</article>
</main>
<footer class=footer>
<span>&copy; 2024 <a href=https://blog.zhangyingwei.com/>胡说</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
<span>
订阅
<a href=/index.xml rel=noopener target=_blank>RSS</a>
</span>
</footer>
<a href=# aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script></script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
<script>document.querySelectorAll('pre > code').forEach(b=>{const c=b.parentNode.parentNode;b.classList.add('font-activate');const a=document.createElement('button');a.classList.add('copy-code'),a.innerText='copy';function d(){a.innerText='copied!',setTimeout(()=>{a.innerText='copy'},2e3)}a.addEventListener('click',e=>{if('clipboard'in navigator){navigator.clipboard.writeText(b.textContent),d();return}const a=document.createRange();a.selectNodeContents(b);const c=window.getSelection();c.removeAllRanges(),c.addRange(a);try{document.execCommand('copy'),d()}catch(a){}c.removeRange(a)}),c.classList.contains("highlight")?c.appendChild(a):c.parentNode.firstChild==c||(b.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?b.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(a):b.parentNode.appendChild(a))})</script></body>
</html>